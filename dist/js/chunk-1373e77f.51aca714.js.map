{"version":3,"sources":["webpack:///./src/views/DocList.vue?5f42","webpack:///./src/views/DocList.vue?d8ae","webpack:///./src/views/DocList.vue?8a63","webpack:///./src/views/DocList.vue?2952","webpack:///src/views/DocList.vue","webpack:///./src/views/DocList.vue?a240","webpack:///./src/views/DocList.vue"],"names":["module","exports","Component","options","__i18n","push","_Ctor","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","loadingApi","_v","_s","searchBy","includes","countDocs","_l","docs","slice","item","i","key","price","getDesc","getTitle","getImgPath","on","$event","viewDetail","scopedSlots","_u","fn","getBooksNum","proxy","stopPropagation","addCollection","isOrderAble","book","getWaitStatus","staticRenderFns","name","data","id","cates","skip","cat","myPreviousOrders","jsonOutput","favList","count","gis","computed","unFinishOrders","filter","str","methods","find","status","window","scrollTo","top","behavior","ok","$router","description","hospital","title","watch","component"],"mappings":"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","file":"js/chunk-1373e77f.51aca714.js","sourcesContent":["module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"zh-tw\":{\"title\":\"名醫會館\"},\"zh-cn\":{\"title\":\"名医会馆\"}}')\n  delete Component.options._Ctor\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocList.vue?vue&type=style&index=0&id=509f0610&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/@intlify/vue-i18n-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocList.vue?vue&type=custom&index=0&blockType=i18n\"; export default mod; export * from \"-!../../node_modules/@intlify/vue-i18n-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocList.vue?vue&type=custom&index=0&blockType=i18n\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"doc-list pt-2\"},[_c('van-overlay',{staticStyle:{\"z-index\":\"9999\",\"text-align\":\"center\"},attrs:{\"show\":_vm.loadingApi}},[_c('van-loading',{attrs:{\"type\":\"spinner\"}})],1),_c('header',[_vm._v(_vm._s(_vm.searchBy.includes(\"熱門\") ? \"熱門\" : _vm.searchBy)+\"名醫 \"+_vm._s(_vm.countDocs))]),_vm._l((_vm.docs.slice(0, 20)),function(item,i){return _c('main',{key:i,staticClass:\"doc-item mt-1\"},[_c('van-card',{attrs:{\"price\":item.price,\"currency\":\"NT\",\"desc\":_vm.getDesc(item),\"title\":_vm.getTitle(item),\"thumb\":_vm.getImgPath(item, i)},on:{\"click\":function($event){return _vm.viewDetail(item)}},scopedSlots:_vm._u([{key:\"tags\",fn:function(){return [_c('van-tag',{attrs:{\"hidden\":\"\",\"plain\":\"\",\"type\":\"danger\"}},[_vm._v(\"可預約數量剩餘(\"+_vm._s(_vm.getBooksNum())+\")\")])]},proxy:true},{key:\"footer\",fn:function(){return [_c('van-button',{staticClass:\"mr-2\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addCollection(item)}}},[_vm._v(\"收藏\")]),(_vm.isOrderAble(item))?_c('van-button',{staticClass:\"mr-2\",attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.book(item)}}},[_vm._v(\"預約\")]):_c('van-tag',{staticClass:\"mr-2\",staticStyle:{\"transform\":\"translate3d(4px,5px,0)\"},attrs:{\"plain\":\"\",\"type\":\"primary\"}},[_vm._v(\"您已預約: \"+_vm._s(_vm.getWaitStatus(item)))])]},proxy:true}],null,true)})],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"doc-list pt-2\">\n    <van-overlay :show=\"loadingApi\" style=\"z-index:9999;text-align:center\">\n      <van-loading type=\"spinner\" />\n    </van-overlay>\n    <header>{{ searchBy.includes(\"熱門\") ? \"熱門\" : searchBy }}名醫 {{ countDocs }}</header>\n\n    <main v-for=\"(item, i) in docs.slice(0, 20)\" :key=\"i\" class=\"doc-item mt-1\">\n      <van-card @click=\"viewDetail(item)\" :price=\"item.price\" currency=\"NT\" :desc=\"getDesc(item)\" :title=\"getTitle(item)\" :thumb=\"getImgPath(item, i)\">\n        <template #tags>\n          <van-tag hidden plain type=\"danger\">可預約數量剩餘({{ getBooksNum() }})</van-tag>\n        </template>\n        <template #footer>\n          <van-button size=\"small\" class=\"mr-2\" @click.stop=\"addCollection(item)\">收藏</van-button>\n          <van-button size=\"small\" type=\"info\" class=\"mr-2\" @click.stop=\"book(item)\" v-if=\"isOrderAble(item)\">預約</van-button>\n          <van-tag plain class=\"mr-2\" style=\"transform:translate3d(4px,5px,0)\" type=\"primary\" v-else>您已預約: {{ getWaitStatus(item) }}</van-tag>\n        </template>\n      </van-card>\n    </main>\n  </section>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport { store, mutations, actions } from \"@/store/global.js\";\nexport default {\n  name: \"docList\",\n  data() {\n    return {\n      id: \"\",\n      name: \"\",\n      docs: [],\n      cates: [],\n      skip: 0,\n      cat: \"\",\n      searchBy: \"\",\n      myPreviousOrders: [],\n      loadingApi: false,\n      jsonOutput: \"\",\n      favList: [],\n      count: 0,\n      gis: \"\",\n    };\n  },\n  computed: {\n    unFinishOrders() {\n      return this.myPreviousOrders.filter((s) => s.status != \"finish\");\n    },\n    countDocs() {\n      const str = this.count && this.count < 48 ? `(共${this.count}位)` : \"\";\n      return str;\n    },\n  },\n  methods: {\n    async getMyFav() {\n      let qs = \"userId=\" + window.lineId;\n      const { items } = await actions.getMyFav(qs);\n      this.favList = items;\n    },\n    isOrderAble(item) {\n      return !this.unFinishOrders.find((s) => s.orderPhoneNum == window.lineId && s.doctorPhone == item.phone);\n    },\n    getWaitStatus(item) {\n      const status = this.unFinishOrders.find((s) => s.orderPhoneNum == window.lineId && s.doctorPhone == item.phone).status;\n      return status == \"process\" ? \"醫師處理中\" : \"等待醫師回覆中\";\n    },\n    async addCollection(item) {\n      const obj = { userId: window.lineId, doctorPhone: item.phone };\n      const ret = this.favList?.find((s) => s.doctorPhone == item.phone);\n      if (ret) {\n        Vue.$toast.success(\"您已收藏成功\");\n        return;\n      }\n      try {\n        await actions.addMyFav(obj);\n        Vue.$toast.success(\"您已收藏成功\");\n      } catch (e) {\n        Vue.$toast.error(\"收藏 Fail\");\n      }\n    },\n    async book(item) {\n      store.bookItem = item;\n      this.$router.push(\"/payment\");\n    },\n    getBooksNum() {\n      return 3;\n    },\n    viewDetail(item) {\n      window.scrollTo({\n        top: 0,\n        behavior: \"smooth\",\n      });\n      const ok = this.isOrderAble(item);\n      ok ? (item.status = \"waiting\") : (item.status = \"finish\");\n      store.selectedDoctor = item;\n      this.$router.push(\"doctordetails\");\n    },\n    getDesc(item) {\n      return \"擅長: \" + item.description;\n    },\n    getTitle(item) {\n      return item.name + \" | \" + item.hospital + \" | \" + item.title;\n    },\n    getImgPath(item, i) {\n      return store.imgPrefix + item.cover.url;\n    },\n    async getDocList() {\n      try {\n        let url = this.id ? \"doctors?cid_eq=\" + this.id : `doctors?_limit=300&_start=${this.skip}`;\n        this.gis ? (url = \"doctors?fullHotspitalName_eq=\" + this.gis) : \"\";\n        this.docs = await axios.get(url);\n        this.count = this.docs.length;\n      } catch (e) {\n        alert(\"\" + e);\n      }\n    },\n    async getOrderHistory() {\n      if (!window.lineId) {\n        this.myPreviousOrders = [];\n        return;\n      }\n      let qs = \"orderPhoneNum_eq=\" + window.lineId;\n      const { count, items } = await actions.getOrders(qs);\n      this.myPreviousOrders = items;\n    },\n  },\n  async mounted() {\n    setTimeout(\n      () =>\n        window.scrollTo({\n          top: 10,\n          behavior: \"smooth\",\n        }),\n      window.scrollTo({\n        top: 0,\n        behavior: \"smooth\",\n      }),\n      300\n    );\n    const { searchBy, gis, id } = this.$route.query;\n    this.gis = gis;\n    this.id = id;\n    this.searchBy = searchBy ? searchBy : \"熱門醫生\";\n    this.name = this.searchBy;\n    try {\n      this.loadingApi = true;\n      await this.getOrderHistory();\n      this.cates = await actions.getCancerTypes();\n      searchBy && !this.id ? (this.id = this.cates.find((s) => s.name.includes(searchBy.slice(0, 2))).cid) : \"\";\n      await this.getDocList();\n    } catch (e) {\n      alert(\"error \" + e);\n    } finally {\n      this.loadingApi = false;\n    }\n    this.getMyFav();\n  },\n  watch: {},\n};\n</script>\n<i18n>\n{\n  \"zh-tw\": {\n    \"title\": \"名醫會館\"\n    \n  },\n  \"zh-cn\": {\n    \"title\": \"名医会馆\"\n  }\n}\n</i18n>\n\n<style lang=\"scss\" scoped>\n.doc-list {\n  background: var(--strapi-blue);\n  width: 100vw;\n  min-height: 100vh;\n  color: white;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 100px;\n  header {\n    font-size: 20px;\n    text-align: center;\n    color: black;\n  }\n}\n.doc-item {\n  border-bottom: 1px solid #ebedf0;\n}\n//1px solid #ebedf0\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DocList.vue?vue&type=template&id=509f0610&scoped=true&\"\nimport script from \"./DocList.vue?vue&type=script&lang=js&\"\nexport * from \"./DocList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DocList.vue?vue&type=style&index=0&id=509f0610&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"509f0610\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./DocList.vue?vue&type=custom&index=0&blockType=i18n\"\nif (typeof block0 === 'function') block0(component)\n\nexport default component.exports"],"sourceRoot":""}