(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dffaa80"],{"0ccb":function(t,e,n){var r=n("50c4"),i=n("1148"),o=n("1d80"),a=Math.ceil,s=function(t){return function(e,n,s){var c,u,d=String(o(e)),l=d.length,f=void 0===s?" ":String(s),v=r(n);return v<=l||""==f?d:(c=v-l,u=i.call(f,a(c/f.length)),u.length>c&&(u=u.slice(0,c)),t?d+u:u+d)}};t.exports={start:s(!1),end:s(!0)}},"25af":function(t,e,n){},4200:function(t,e,n){"use strict";n("25af")},6062:function(t,e,n){"use strict";var r=n("6d61"),i=n("6566");t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},"64e5":function(t,e,n){"use strict";var r=n("d039"),i=n("0ccb").start,o=Math.abs,a=Date.prototype,s=a.getTime,c=a.toISOString;t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=c.call(new Date(-50000000000001))}))||!r((function(){c.call(new Date(NaN))}))?function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+i(o(e),r?6:4,0)+"-"+i(t.getUTCMonth()+1,2,0)+"-"+i(t.getUTCDate(),2,0)+"T"+i(t.getUTCHours(),2,0)+":"+i(t.getUTCMinutes(),2,0)+":"+i(t.getUTCSeconds(),2,0)+"."+i(n,3,0)+"Z"}:c},6566:function(t,e,n){"use strict";var r=n("9bf2").f,i=n("7c73"),o=n("e2cc"),a=n("0366"),s=n("19aa"),c=n("2266"),u=n("7dd0"),d=n("2626"),l=n("83ab"),f=n("f183").fastKey,v=n("69f3"),p=v.set,m=v.getterFor;t.exports={getConstructor:function(t,e,n,u){var d=t((function(t,r){s(t,d,e),p(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),l||(t.size=0),void 0!=r&&c(r,t[u],{that:t,AS_ENTRIES:n})})),v=m(e),g=function(t,e,n){var r,i,o=v(t),a=h(t,e);return a?a.value=n:(o.last=a={index:i=f(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),l?o.size++:t.size++,"F"!==i&&(o.index[i]=a)),t},h=function(t,e){var n,r=v(t),i=f(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return o(d.prototype,{clear:function(){var t=this,e=v(t),n=e.index,r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;e.first=e.last=void 0,l?e.size=0:t.size=0},delete:function(t){var e=this,n=v(e),r=h(e,t);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),l?n.size--:e.size--}return!!r},forEach:function(t){var e,n=v(this),r=a(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){r(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!h(this,t)}}),o(d.prototype,n?{get:function(t){var e=h(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),l&&r(d.prototype,"size",{get:function(){return v(this).size}}),d},setStrong:function(t,e,n){var r=e+" Iterator",i=m(e),o=m(r);u(t,e,(function(t,e){p(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=o(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),d(e)}}},6852:function(t,e,n){"use strict";var r=n("7287"),i=n.n(r);e["default"]=i.a},"6d61":function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("94ca"),a=n("6eeb"),s=n("f183"),c=n("2266"),u=n("19aa"),d=n("861d"),l=n("d039"),f=n("1c7e"),v=n("d44e"),p=n("7156");t.exports=function(t,e,n){var m=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),h=m?"set":"add",y=i[t],w=y&&y.prototype,x=y,b={},_=function(t){var e=w[t];a(w,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!d(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!d(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!d(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(o(t,"function"!=typeof y||!(g||w.forEach&&!l((function(){(new y).entries().next()})))))x=n.getConstructor(e,t,m,h),s.REQUIRED=!0;else if(o(t,!0)){var k=new x,S=k[h](g?{}:-0,1)!=k,C=l((function(){k.has(1)})),O=f((function(t){new y(t)})),D=!g&&l((function(){var t=new y,e=5;while(e--)t[h](e,e);return!t.has(-0)}));O||(x=e((function(e,n){u(e,x,t);var r=p(new y,e,x);return void 0!=n&&c(n,r[h],{that:r,AS_ENTRIES:m}),r})),x.prototype=w,w.constructor=x),(C||D)&&(_("delete"),_("has"),m&&_("get")),(D||S)&&_(h),g&&w.clear&&delete w.clear}return b[t]=x,r({global:!0,forced:x!=y},b),v(x,t),g||n.setStrong(x,t,m),x}},7287:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-tw":{"title":"名醫會館"},"zh-cn":{"title":"名医会馆"}}'),delete t.options._Ctor}},"7db0":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").find,o=n("44d2"),a=n("ae40"),s="find",c=!0,u=a(s);s in[]&&Array(1)[s]((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!u},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},"7f83":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"doc-list"},[n("van-nav-bar",{attrs:{title:"我的預約紀錄","left-text":"返回","left-arrow":""},on:{"click-left":function(e){return t.$router.push("login")}},scopedSlots:t._u([{key:"right",fn:function(){return[t.commentFilter?n("van-tag",{staticClass:"ml-2",attrs:{round:"",type:"primary"},on:{click:function(e){t.commentFilter=""}}},[t._v("離開留言區")]):t._e()]},proxy:!0}])}),n("van-overlay",{staticStyle:{"text-align":"center"},attrs:{show:t.loadingApi}},[n("van-loading",{attrs:{type:"spinner"}})],1),t.showLeavelMsg?n("van-field",{attrs:{autofocus:"true",rows:"5",autosize:"",label:"留言",type:"textarea",maxlength:"150",placeholder:"请输入留言","show-word-limit":""},scopedSlots:t._u([{key:"button",fn:function(){return[n("van-tag",{staticClass:"ml-2",attrs:{type:"primary"},on:{click:function(e){return t.addComment(t.myMsg,!0)}}},[t._v("新增")]),n("van-tag",{staticClass:"ml-2",attrs:{type:"danger"},on:{click:function(e){t.showLeavelMsg=!1}}},[t._v("取消")])]},proxy:!0}],null,!1,2229602123),model:{value:t.myMsg,callback:function(e){t.myMsg=e},expression:"myMsg"}}):t._e(),n("div"),t._l(t.orders,(function(e,r){return e.details?n("main",{key:r,staticClass:"doc-item mt-1"},[n("van-card",{attrs:{price:e.details.price,currency:"NT",desc:t.getDesc(e),title:t.getTitle(e),thumb:t.getImgPath(e,r)},on:{click:function(n){return t.viewDetail(e)}},scopedSlots:t._u([{key:"tags",fn:function(){return[n("van-tag",{attrs:{plain:"",type:"danger"}},[t._v(t._s(t.$formatStatus(e.status)))]),n("van-tag",{staticStyle:{transform:"translateX(5px)"},attrs:{plain:"",type:"primary"},on:{click:function(n){return t.viewComment(e)}}},[t._v("可查看留言為"+t._s(e.comment.length)+"則")]),t.commentFilter?n("van-tag",{staticClass:"ml-2",staticStyle:{transform:"translateX(10px)"},attrs:{type:"primary"},on:{click:function(e){return t.addComment()}}},[t._v("新增留言")]):t._e()]},proxy:!0},{key:"footer",fn:function(){return["finish"==e.status?n("van-tag",{attrs:{type:"success"}},[t._v("再次預約")]):t._e()]},proxy:!0}],null,!0)})],1):t._e()})),t.commentFilter?n("nav",{staticClass:"mt-1",staticStyle:{color:"white","font-size":"14px"}},t._l(t.orders[0].comment,(function(e,r){return n("div",{key:r,staticClass:"comment-dtc px-2 py-2",style:e.docComment?"background:#1f7cd3;":"background:#0f579b;"},[n("div",{staticClass:"mb-1"},[t._v(t._s(t.$twDate(e.commentAt)))]),n("div",{staticStyle:{"padding-right":"50px"}},[t._v(t._s(e.docComment||e.userComment))]),n("div",{staticStyle:{float:"right","margin-top":"-30px"}},[e.docComment?n("img",{staticStyle:{"border-radius":"50%"},attrs:{src:"https://www.cgh.org.tw/rwd101/Store/bImages/b07907.jpg",width:"30",height:"30"}}):t._e(),e.docComment?t._e():n("img",{staticStyle:{"border-radius":"50%",color:"red"},attrs:{src:"person.svg",width:"30",height:"30"}})])])})),0):t._e()],2)},i=[],o=(n("a4d3"),n("e01a"),n("7db0"),n("4160"),n("a15b"),n("d81d"),n("accc"),n("0d03"),n("b0c0"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),n("2909")),a=(n("96cf"),n("1da1")),s=n("2b0e"),c=n("3aec"),u={name:"login",data:function(){return{docs:[],skip:0,orders:[],commentFilter:"",showLeavelMsg:!1,myMsg:"",price:"",loadingApi:!1}},computed:{},methods:{book:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={orderPhoneNum:sessionStorage.phone,paidAmount:t.details.price,status:"waiting",orderDate:(new Date).toISOString(),doctorPhone:t.details.phone,isCancer:t.details.cid<c["c"].MIN_NON_CANCER_NUM,hardCopyReceived:!1,copySendBack:!1,docHasCopy:!1,comment:t.details.cid<c["c"].MIN_NON_CANCER_NUM?[{docComment:"需要你的癌症報告,請你用郵件寄出",commentAt:(new Date).toISOString(),rating:0,userComment:""}]:[]},n.prev=1,e.loadingApi=!0,n.next=5,c["a"].addOrder(r);case 5:return s["a"].$toast.success("你已預約成功"),n.next=8,e.getOrderHistoryList();case 8:n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](1),s["a"].$toast.error("order fail");case 13:return n.prev=13,sessionStorage.orderedDocPhone="",e.loadingApi=!1,n.finish(13);case 17:case"end":return n.stop()}}),n,null,[[1,10,13,17]])})))()},addComment:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t||e){r.next=5;break}n.myMsg="",n.showLeavelMsg=!0,r.next=13;break;case 5:if(!t){r.next=13;break}return i={docComment:"",commentAt:(new Date).toISOString(),rating:0,userComment:t},n.orders[0].comment.unshift(i),r.next=10,c["a"].updateOrder(n.orders[0]);case 10:n.orders=Object(o["a"])(n.orders),n.commentFilter="",n.showLeavelMsg=!1;case 13:case"end":return r.stop()}}),r)})))()},viewComment:function(t){},viewDetail:function(t){this.commentFilter=t.doctorPhone},getDesc:function(t){return"專長: "+t.details.description},getTitle:function(t){return t.details.name+" | "+t.details.hospital+" | "+t.details.title+" @ "+this.$twDate(t.orderDate)+" 預約成功"},getImgPath:function(t,e){return c["c"].imgPrefix+t.details.cover.url},getOrderHistoryList:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r,i,a,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.orders=[],n="orderPhoneNum_eq="+sessionStorage.phone,n+="&_sort=orderDate:desc",e.prev=3,t.loadingApi=!0,e.next=7,c["a"].getOrders(n);case 7:return r=e.sent,r.count,i=r.items,a=new Set(i.map((function(t){return"phone_in="+t.doctorPhone}))),n=Object(o["a"])(a).join("&"),e.next=14,c["a"].getDoctors(n);case 14:s=e.sent,u=s.items,u.forEach((function(t){return i.find((function(e){return e.doctorPhone==t.phone})).details=t})),t.orders=i,e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](3),alert("error getOrderHistoryList: "+e.t0);case 23:return e.prev=23,t.loadingApi=!1,e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[3,20,23,26]])})))()}},mounted:function(){this.getOrderHistoryList()},watch:{}},d=u,l=(n("4200"),n("2877")),f=n("6852"),v=Object(l["a"])(d,r,i,!1,null,"e22d8c74",null);"function"===typeof f["default"]&&Object(f["default"])(v);e["default"]=v.exports},a15b:function(t,e,n){"use strict";var r=n("23e7"),i=n("44ad"),o=n("fc6a"),a=n("a640"),s=[].join,c=i!=Object,u=a("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},accc:function(t,e,n){var r=n("23e7"),i=n("64e5");r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==i},{toISOString:i})},bb2f:function(t,e,n){var r=n("d039");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},f183:function(t,e,n){var r=n("d012"),i=n("861d"),o=n("5135"),a=n("9bf2").f,s=n("90e3"),c=n("bb2f"),u=s("meta"),d=0,l=Object.isExtensible||function(){return!0},f=function(t){a(t,u,{value:{objectID:"O"+ ++d,weakData:{}}})},v=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,u)){if(!l(t))return"F";if(!e)return"E";f(t)}return t[u].objectID},p=function(t,e){if(!o(t,u)){if(!l(t))return!0;if(!e)return!1;f(t)}return t[u].weakData},m=function(t){return c&&g.REQUIRED&&l(t)&&!o(t,u)&&f(t),t},g=t.exports={REQUIRED:!1,fastKey:v,getWeakData:p,onFreeze:m};r[u]=!0}}]);
//# sourceMappingURL=chunk-6dffaa80.e24a9513.js.map