(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-98648fda"],{"0746":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-tw":{"title":"名醫會館"},"zh-cn":{"title":"名医会馆"}}'),delete t.options._Ctor}},"0ccb":function(t,e,n){var r=n("50c4"),o=n("1148"),i=n("1d80"),a=Math.ceil,s=function(t){return function(e,n,s){var c,u,d=String(i(e)),l=d.length,f=void 0===s?" ":String(s),p=r(n);return p<=l||""==f?d:(c=p-l,u=o.call(f,a(c/f.length)),u.length>c&&(u=u.slice(0,c)),t?d+u:u+d)}};t.exports={start:s(!1),end:s(!0)}},2051:function(t,e,n){},"5af8":function(t,e,n){"use strict";var r=n("0746"),o=n.n(r);e["default"]=o.a},"5e10":function(t,e,n){"use strict";n("2051")},"64e5":function(t,e,n){"use strict";var r=n("d039"),o=n("0ccb").start,i=Math.abs,a=Date.prototype,s=a.getTime,c=a.toISOString;t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=c.call(new Date(-50000000000001))}))||!r((function(){c.call(new Date(NaN))}))?function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+o(i(e),r?6:4,0)+"-"+o(t.getUTCMonth()+1,2,0)+"-"+o(t.getUTCDate(),2,0)+"T"+o(t.getUTCHours(),2,0)+":"+o(t.getUTCMinutes(),2,0)+":"+o(t.getUTCSeconds(),2,0)+"."+o(n,3,0)+"Z"}:c},"7db0":function(t,e,n){"use strict";var r=n("23e7"),o=n("b727").find,i=n("44d2"),a=n("ae40"),s="find",c=!0,u=a(s);s in[]&&Array(1)[s]((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!u},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},a4d8:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"doc-list pt-2"},[n("header",[t._v("快速找名醫")]),n("van-search",{staticClass:"mx-4 mt-2",attrs:{background:"#1c1b7e",shape:"round",placeholder:"醫院 | 醫生名 | 病名"},model:{value:t.searchBy,callback:function(e){t.searchBy=e},expression:"searchBy"}}),t._l(t.docs,(function(e,r){return n("main",{key:r,staticClass:"doc-item mt-1"},[n("van-card",{attrs:{price:e.price,currency:"NT",desc:t.getDesc(e),title:t.getTitle(e),thumb:t.getImgPath(e,r)},on:{click:function(n){return t.viewDetail(e)}},scopedSlots:t._u([{key:"tags",fn:function(){return[n("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("可預約數量剩餘("+t._s(t.getBooksNum())+")")])]},proxy:!0},{key:"footer",fn:function(){return[n("van-button",{staticClass:"mr-2",attrs:{size:"mini"}},[t._v("收藏")]),t.isOrderAble(e)?n("van-button",{staticClass:"mr-2",attrs:{size:"mini"},on:{click:function(n){return t.book(e)}}},[t._v("預約")]):n("van-tag",{staticClass:"mr-2",staticStyle:{transform:"translate3d(4px,5px,0)"},attrs:{plain:"",type:"primary"}},[t._v("您已預約: "+t._s(t.getWaitStatus(e)))])]},proxy:!0}],null,!0)})],1)}))],2)},o=[],i=(n("a4d3"),n("e01a"),n("4de4"),n("7db0"),n("accc"),n("0d03"),n("b0c0"),n("2909")),a=(n("96cf"),n("1da1")),s=n("2b0e"),c=n("3aec"),u={name:"docList",data:function(){return{id:"",name:"",docs:[],skip:0,cat:"",searchBy:"",myPreviousOrders:[]}},computed:{unFinishOrders:function(){return this.myPreviousOrders.filter((function(t){return"finish"!=t.status}))}},methods:{isOrderAble:function(t){return!this.unFinishOrders.find((function(e){return e.orderPhoneNum==sessionStorage.phone&&e.doctorPhone==t.phone}))},getWaitStatus:function(t){var e=this.unFinishOrders.find((function(e){return e.orderPhoneNum==sessionStorage.phone&&e.doctorPhone==t.phone})).status;return"process"==e?"狀態為醫師處理中":"狀態為等待醫師回覆中"},book:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(sessionStorage.orderedDocPhone=t.phone,sessionStorage.token){n.next=4;break}return e.$router.push("/login?callback=doclist"),n.abrupt("return");case 4:return r={orderPhoneNum:sessionStorage.phone,paidAmount:t.price,status:"waiting",orderDate:(new Date).toISOString(),doctorPhone:t.phone,isCancer:t.cid<c["c"].MIN_NON_CANCER_NUM,hardCopyReceived:!1,copySendBack:!1,docHasCopy:!1,comment:t.cid<c["c"].MIN_NON_CANCER_NUM?[{docComment:"需要你的癌症報告,請你用郵件寄出",commentAt:(new Date).toISOString(),rating:0,userComment:""}]:[]},n.prev=5,n.next=8,c["a"].addOrder(r);case 8:return s["a"].$toast.success("你已預約成功"),n.next=11,e.getOrderHistory();case 11:e.docs=Object(i["a"])(e.docs),n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](5),s["a"].$toast.error("order fail");case 17:return n.prev=17,sessionStorage.orderedDocPhone="",n.finish(17);case 20:case"end":return n.stop()}}),n,null,[[5,14,17,20]])})))()},getBooksNum:function(){return 3},viewDetail:function(t){},getDesc:function(t){return"專長: "+t.description},getTitle:function(t){return t.name+" | "+t.hospital+" | "+t.title},getImgPath:function(t,e){return c["c"].imgPrefix+t.cover.url},getDocList:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=t.id?"doctors?cid_eq="+t.id:"doctors?_limit=30&_start=".concat(t.skip),e.next=4,axios.get(n);case 4:t.docs=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getOrderHistory:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="orderPhoneNum_eq="+sessionStorage.phone,e.next=3,c["a"].getOrders(n);case 3:r=e.sent,r.count,o=r.items,t.myPreviousOrders=o;case 7:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.query,r=n.id,o=n.name,t.id=+r,t.name=o,t.searchBy=o||"熱門醫生",c["c"].isApiLoading=!0,e.next=7,t.getOrderHistory();case 7:return e.next=9,t.getDocList();case 9:c["c"].isApiLoading=!1;case 10:case"end":return e.stop()}}),e)})))()},watch:{}},d=u,l=(n("5e10"),n("2877")),f=n("5af8"),p=Object(l["a"])(d,r,o,!1,null,"394dc6b9",null);"function"===typeof f["default"]&&Object(f["default"])(p);e["default"]=p.exports},accc:function(t,e,n){var r=n("23e7"),o=n("64e5");r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==o},{toISOString:o})}}]);
//# sourceMappingURL=chunk-98648fda.f3d5290b.js.map