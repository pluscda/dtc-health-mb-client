(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50f408f8"],{"0ccb":function(t,e,n){var r=n("50c4"),o=n("1148"),a=n("1d80"),i=Math.ceil,s=function(t){return function(e,n,s){var c,u,l=String(a(e)),d=l.length,m=void 0===s?" ":String(s),f=r(n);return f<=d||""==m?l:(c=f-d,u=o.call(m,i(c/m.length)),u.length>c&&(u=u.slice(0,c)),t?l+u:u+l)}};t.exports={start:s(!1),end:s(!0)}},"43d3":function(t,e,n){"use strict";n("c3b5")},"64e5":function(t,e,n){"use strict";var r=n("d039"),o=n("0ccb").start,a=Math.abs,i=Date.prototype,s=i.getTime,c=i.toISOString;t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=c.call(new Date(-50000000000001))}))||!r((function(){c.call(new Date(NaN))}))?function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+o(a(e),r?6:4,0)+"-"+o(t.getUTCMonth()+1,2,0)+"-"+o(t.getUTCDate(),2,0)+"T"+o(t.getUTCHours(),2,0)+":"+o(t.getUTCMinutes(),2,0)+":"+o(t.getUTCSeconds(),2,0)+"."+o(n,3,0)+"Z"}:c},6852:function(t,e,n){"use strict";var r=n("7287"),o=n.n(r);e["default"]=o.a},7287:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-tw":{"title":"名醫會館"},"zh-cn":{"title":"名医会馆"}}'),delete t.options._Ctor}},"7db0":function(t,e,n){"use strict";var r=n("23e7"),o=n("b727").find,a=n("44d2"),i=n("ae40"),s="find",c=!0,u=i(s);s in[]&&Array(1)[s]((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!u},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},"7f83":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"doc-list"},[n("van-overlay",{staticStyle:{"z-index":"999","text-align":"center"},attrs:{show:t.loadingApi}},[n("van-loading",{attrs:{type:"spinner"}})],1),n("van-nav-bar",{attrs:{title:"我的預約紀錄","left-text":"返回","left-arrow":""},on:{"click-left":function(e){return t.$router.push("login")}},scopedSlots:t._u([{key:"right",fn:function(){return[t.commentFilter?n("van-tag",{staticClass:"ml-2",attrs:{round:"",type:"primary"},on:{click:function(e){t.commentFilter=""}}},[t._v("離開留言區")]):t._e()]},proxy:!0}])}),t.showLeavelMsg?n("van-field",{attrs:{autofocus:"true",rows:"5",autosize:"",label:"留言",type:"textarea",maxlength:"150",placeholder:"请输入留言","show-word-limit":""},scopedSlots:t._u([{key:"button",fn:function(){return[n("van-tag",{staticClass:"ml-2",attrs:{type:"primary"},on:{click:function(e){return t.addComment(t.myMsg,!0)}}},[t._v("新增")]),n("van-tag",{staticClass:"ml-2",attrs:{type:"danger"},on:{click:function(e){t.showLeavelMsg=!1}}},[t._v("取消")])]},proxy:!0}],null,!1,2229602123),model:{value:t.myMsg,callback:function(e){t.myMsg=e},expression:"myMsg"}}):t._e(),n("div"),t._l(t.orders,(function(e,r){return e.details?n("main",{key:r,staticClass:"doc-item mt-1"},[n("van-card",{attrs:{price:e.details.price,currency:"NT",desc:t.getDesc(e),title:t.getTitle(e),thumb:t.getImgPath(e,r)},on:{click:function(n){return t.viewDetail(e)}},scopedSlots:t._u([{key:"tags",fn:function(){return[n("van-tag",{attrs:{plain:"",type:"danger"}},[t._v(t._s(t.$formatStatus(e.status)))]),n("van-tag",{staticStyle:{transform:"translateX(5px)"},attrs:{plain:"",type:"primary"},on:{click:function(n){return t.viewComment(e)}}},[t._v("可查看留言為"+t._s(e.comment.length)+"則")]),t.commentFilter?n("van-tag",{staticClass:"ml-2",staticStyle:{transform:"translateX(10px)"},attrs:{type:"primary"},on:{click:function(e){return t.addComment()}}},[t._v("新增留言")]):t._e()]},proxy:!0},{key:"footer",fn:function(){return["finish"==e.status?n("van-tag",{attrs:{type:"success"}},[t._v("再次預約")]):t._e()]},proxy:!0}],null,!0)})],1):t._e()})),t.commentFilter?n("nav",{staticClass:"mt-1",staticStyle:{color:"white","font-size":"14px"}},t._l(t.orders[0].comment,(function(e,r){return n("div",{key:r,staticClass:"comment-dtc px-2 py-2",style:e.docComment?"background:#1f7cd3;":"background:#0f579b;"},[n("div",{staticClass:"mb-1"},[t._v(t._s(t.$twDate(e.commentAt)))]),n("div",{staticStyle:{"padding-right":"50px"}},[t._v(t._s(e.docComment||e.userComment))]),n("div",{staticStyle:{float:"right","margin-top":"-30px"}},[e.docComment?n("img",{staticStyle:{"border-radius":"50%"},attrs:{src:"https://www.cgh.org.tw/rwd101/Store/bImages/b07907.jpg",width:"30",height:"30"}}):t._e(),e.docComment?t._e():n("img",{staticStyle:{"border-radius":"50%",color:"red"},attrs:{src:"person.svg",width:"30",height:"30"}})])])})),0):t._e()],2)},o=[],a=(n("a4d3"),n("e01a"),n("7db0"),n("4160"),n("a15b"),n("d81d"),n("accc"),n("0d03"),n("b0c0"),n("159b"),n("2909")),i=(n("96cf"),n("1da1")),s=n("2b0e"),c=n("3aec"),u={name:"login",data:function(){return{docs:[],skip:0,orders:[],commentFilter:"",showLeavelMsg:!1,myMsg:"",price:"",loadingApi:!1}},computed:{},methods:{book:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={orderPhoneNum:sessionStorage.phone,paidAmount:t.details.price,status:"waiting",orderDate:(new Date).toISOString(),doctorPhone:t.details.phone,isCancer:t.details.cid<c["c"].MIN_NON_CANCER_NUM,hardCopyReceived:!1,copySendBack:!1,docHasCopy:!1,comment:t.details.cid<c["c"].MIN_NON_CANCER_NUM?[{docComment:"需要你的癌症報告,請你用郵件寄出",commentAt:(new Date).toISOString(),rating:0,userComment:""}]:[]},n.prev=1,e.loadingApi=!0,n.next=5,c["a"].addOrder(r);case 5:return s["a"].$toast.success("你已預約成功"),n.next=8,e.getOrderHistoryList();case 8:n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](1),s["a"].$toast.error("order fail");case 13:return n.prev=13,sessionStorage.orderedDocPhone="",e.loadingApi=!1,n.finish(13);case 17:case"end":return n.stop()}}),n,null,[[1,10,13,17]])})))()},addComment:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t||e){r.next=5;break}n.myMsg="",n.showLeavelMsg=!0,r.next=13;break;case 5:if(!t){r.next=13;break}return o={docComment:"",commentAt:(new Date).toISOString(),rating:0,userComment:t},n.orders[0].comment.unshift(o),r.next=10,c["a"].updateOrder(n.orders[0]);case 10:n.orders=Object(a["a"])(n.orders),n.commentFilter="",n.showLeavelMsg=!1;case 13:case"end":return r.stop()}}),r)})))()},viewComment:function(t){},viewDetail:function(t){this.commentFilter=t.doctorPhone},getDesc:function(t){return"專長: "+t.details.description},getTitle:function(t){return t.details.name+" | "+t.details.hospital+" | "+t.details.title+" @ "+this.$twDate(t.orderDate)+" 預約成功"},getImgPath:function(t,e){return c["c"].imgPrefix+t.details.cover.url},getOrderHistoryList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,o,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.orders=[],n="orderPhoneNum_eq="+sessionStorage.phone,n+="&_sort=orderDate:desc",e.prev=3,t.loadingApi=!0,e.next=7,c["a"].getOrders(n);case 7:return r=e.sent,r.count,o=r.items,n=o.map((function(t){return"phone_in="+t.doctorPhone})).join("&"),e.next=13,c["a"].getDoctors(n);case 13:a=e.sent,i=a.items,i.forEach((function(t){return o.find((function(e){return e.doctorPhone==t.phone})).details=t})),t.orders=o;case 17:return e.prev=17,t.loadingApi=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,,17,20]])})))()}},mounted:function(){this.getOrderHistoryList()},watch:{}},l=u,d=(n("43d3"),n("2877")),m=n("6852"),f=Object(d["a"])(l,r,o,!1,null,"478e0e12",null);"function"===typeof m["default"]&&Object(m["default"])(f);e["default"]=f.exports},a15b:function(t,e,n){"use strict";var r=n("23e7"),o=n("44ad"),a=n("fc6a"),i=n("a640"),s=[].join,c=o!=Object,u=i("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(t){return s.call(a(this),void 0===t?",":t)}})},accc:function(t,e,n){var r=n("23e7"),o=n("64e5");r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==o},{toISOString:o})},c3b5:function(t,e,n){}}]);
//# sourceMappingURL=chunk-50f408f8.1b00e025.js.map