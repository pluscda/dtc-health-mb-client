(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00a5fed6"],{"0ccb":function(t,e,r){var n=r("50c4"),a=r("1148"),i=r("1d80"),o=Math.ceil,s=function(t){return function(e,r,s){var c,u,d=String(i(e)),l=d.length,g=void 0===s?" ":String(s),m=n(r);return m<=l||""==g?d:(c=m-l,u=a.call(g,o(c/g.length)),u.length>c&&(u=u.slice(0,c)),t?d+u:u+d)}};t.exports={start:s(!1),end:s(!0)}},"64e5":function(t,e,r){"use strict";var n=r("d039"),a=r("0ccb").start,i=Math.abs,o=Date.prototype,s=o.getTime,c=o.toISOString;t.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=c.call(new Date(-50000000000001))}))||!n((function(){c.call(new Date(NaN))}))?function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),r=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+a(i(e),n?6:4,0)+"-"+a(t.getUTCMonth()+1,2,0)+"-"+a(t.getUTCDate(),2,0)+"T"+a(t.getUTCHours(),2,0)+":"+a(t.getUTCMinutes(),2,0)+":"+a(t.getUTCSeconds(),2,0)+"."+a(r,3,0)+"Z"}:c},6852:function(t,e,r){"use strict";var n=r("7287"),a=r.n(n);e["default"]=a.a},7287:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-tw":{"title":"名醫會館"},"zh-cn":{"title":"名医会馆"}}'),delete t.options._Ctor}},"7f83":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"doc-list"},[r("van-nav-bar",{attrs:{title:"我的預約紀錄"}}),r("van-overlay",{staticStyle:{"text-align":"center"},attrs:{show:t.loadingApi}},[r("van-loading",{attrs:{type:"spinner"}})],1),t._l(t.orders,(function(e,n){return r("main",{key:e.id,staticClass:"doc-item mt-1"},[r("van-card",{attrs:{price:e.details.price,currency:"NT",desc:t.getDesc(e),title:t.getTitle(e),thumb:t.getImgPath(e,n)},on:{click:function(r){return t.viewMyMsgBoard(e)}},scopedSlots:t._u([{key:"footer",fn:function(){return[r("div",{staticClass:"my-tags-grid3"},[r("div"),r("van-badge",{attrs:{content:t.getMyCount(e.message),color:"rgb(25, 137, 250)"}},[r("div",{staticClass:"my-msg"},[t._v("我的留言")])]),r("van-badge",{attrs:{content:t.getDoctCount(e.message),color:"rgb(25, 137, 250)"}},[r("div",{staticClass:"my-doc-msg"},[t._v("醫生留言")])])],1)]},proxy:!0}],null,!0)})],1)}))],2)},a=[],i=(r("a4d3"),r("e01a"),r("99af"),r("4de4"),r("7db0"),r("4160"),r("a15b"),r("d81d"),r("accc"),r("0d03"),r("b0c0"),r("d3b7"),r("6062"),r("3ca3"),r("159b"),r("ddb0"),r("4795"),r("2909")),o=r("5530"),s=(r("96cf"),r("1da1")),c=r("2b0e"),u=r("3aec"),d={name:"myorderlist",data:function(){return{judgeFilter:"",showClipPath:!1,docs:[],skip:0,orders:[],commentFilter:"",showLeavelMsg:!1,myMsg:"",price:"",loadingApi:!1}},computed:{},methods:{showJudge:function(t){this.$router.push("/myfinaljudge?id="+t.id)},getMyCount:function(t){return t.filter((function(t){return t.userComment})).length},getDoctCount:function(t){return t.filter((function(t){return t.docComment})).length},updateReadStatus:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.loadingApi=!0,t.read=!0,r.next=4,u["a"].updateOrder(e.myOrders[0]);case 4:return r.next=6,e.getOrderHistoryList();case 6:e.myMsg="",e.loadingApi=!1;case 8:case"end":return r.stop()}}),r)})))()},getMsgStatus:function(t){var e=t.userComment&&t.read?"醫生已讀取":"";return e||(e=t.userComment&&!t.read?"醫生未讀取":""),e||(e=t.docComment&&!t.read?"您未讀取":""),e||(e=t.docComment&&t.read?"您已讀取":""),e},addComment:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.loadingApi=!0,n={docComment:"",commentAt:(new Date).toISOString(),rating:0,userComment:t,read:!1},e.myOrders[0].message||(e.myOrders[0].message=[]),e.myOrders[0].message.unshift(n),r.next=6,u["a"].updateOrder(e.myOrders[0]);case 6:a=Object(o["a"])({},e.myOrders[0]),c["a"].$toast.success("新增留言成功"),setTimeout((function(){return e.getData()}),100),e.orders=Object(i["a"])(e.orders),e.loadingApi=!1,"您的線上客戶: ".concat(u["c"].lineProfile.displayName,"新增留言:").concat(t),u["a"].lineMsg({id:a.doctorPhone,msg:t});case 13:case"end":return r.stop()}}),r)})))()},viewMyMsgBoard:function(t){u["c"].selectedDoctor=t,this.$router.push("/mymsgboard")},getDesc:function(t){return"專長: "+t.details.description},getTitle:function(t){return t.details.name+" | "+t.details.hospital+" | "+t.details.title+" @ "+this.$twDate(t.orderDate)+" 預約成功"},getImgPath:function(t,e){return u["c"].imgPrefix+t.details.cover.url},getOrderHistoryList:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,n,a,o,s,c,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.orders=[],window.lineId=u["c"].lineProfile.userId,r="orderPhoneNum_eq="+window.lineId,r+="&_sort=orderDate:desc",e.prev=4,t.loadingApi=!0,e.next=8,u["a"].getOrders(r);case 8:if(n=e.sent,a=n.count,o=n.items,a){e.next=13;break}return e.abrupt("return");case 13:return s=new Set(o.map((function(t){return"phone_in="+t.doctorPhone}))),r=Object(i["a"])(s).join("&"),e.next=17,u["a"].getDoctors(r);case 17:c=e.sent,d=c.items,d.forEach((function(t){return o.find((function(e){return e.doctorPhone==t.phone})).details=t})),t.orders=o,e.next=26;break;case 23:e.prev=23,e.t0=e["catch"](4),alert("error getOrderHistoryList: "+e.t0);case 26:return e.prev=26,t.loadingApi=!1,e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[4,23,26,29]])})))()}},mounted:function(){this.getOrderHistoryList()},watch:{}},l=d,g=(r("eda7"),r("2877")),m=r("6852"),f=Object(g["a"])(l,n,a,!1,null,"6e85eb10",null);"function"===typeof m["default"]&&Object(m["default"])(f);e["default"]=f.exports},a15b:function(t,e,r){"use strict";var n=r("23e7"),a=r("44ad"),i=r("fc6a"),o=r("a640"),s=[].join,c=a!=Object,u=o("join",",");n({target:"Array",proto:!0,forced:c||!u},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},accc:function(t,e,r){var n=r("23e7"),a=r("64e5");n({target:"Date",proto:!0,forced:Date.prototype.toISOString!==a},{toISOString:a})},aeea:function(t,e,r){},eda7:function(t,e,r){"use strict";r("aeea")}}]);
//# sourceMappingURL=chunk-00a5fed6.60f1f197.js.map