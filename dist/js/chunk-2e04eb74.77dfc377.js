(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e04eb74"],{"0746":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-tw":{"title":"名醫會館"},"zh-cn":{"title":"名医会馆"}}'),delete e.options._Ctor}},"5af8":function(e,t,n){"use strict";var r=n("0746"),a=n.n(r);t["default"]=a.a},a4d8:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"doc-list pt-2"},[n("van-overlay",{staticStyle:{"z-index":"9999","text-align":"center"},attrs:{show:e.loadingApi}},[n("van-loading",{attrs:{type:"spinner"}})],1),n("header",[e._v(e._s(e.searchBy.includes("熱門")?"熱門":e.searchBy)+"名醫")]),e._l(e.docs,(function(t,r){return n("main",{key:r,staticClass:"doc-item mt-1"},[n("van-card",{attrs:{price:t.price,currency:"NT",desc:e.getDesc(t),title:e.getTitle(t),thumb:e.getImgPath(t,r)},on:{click:function(n){return e.viewDetail(t)}},scopedSlots:e._u([{key:"tags",fn:function(){return[n("van-tag",{attrs:{plain:"",type:"danger"}},[e._v("可預約數量剩餘("+e._s(e.getBooksNum())+")")])]},proxy:!0},{key:"footer",fn:function(){return[n("van-button",{staticClass:"mr-2",attrs:{size:"small"},on:{click:function(n){return n.stopPropagation(),e.addCollection(t)}}},[e._v("收藏")]),e.isOrderAble(t)?n("van-button",{staticClass:"mr-2",attrs:{size:"small",type:"info"},on:{click:function(n){return n.stopPropagation(),e.book(t)}}},[e._v("預約")]):n("van-tag",{staticClass:"mr-2",staticStyle:{transform:"translate3d(4px,5px,0)"},attrs:{plain:"",type:"primary"}},[e._v("您已預約: "+e._s(e.getWaitStatus(t)))])]},proxy:!0}],null,!0)})],1)}))],2)},a=[],i=(n("a4d3"),n("e01a"),n("4de4"),n("7db0"),n("b0c0"),n("96cf"),n("1da1")),s=n("2b0e"),o=n("3aec"),c={name:"docList",data:function(){return{id:"",name:"",docs:[],cates:[],skip:0,cat:"",searchBy:"",myPreviousOrders:[],loadingApi:!1,jsonOutput:"",favList:[]}},computed:{unFinishOrders:function(){return this.myPreviousOrders.filter((function(e){return"finish"!=e.status}))}},methods:{getMyFav:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="userId="+window.lineId,t.next=3,o["a"].getMyFav(n);case 3:r=t.sent,a=r.items,e.favList=a;case 6:case"end":return t.stop()}}),t)})))()},isOrderAble:function(e){return!this.unFinishOrders.find((function(t){return t.orderPhoneNum==window.lineId&&t.doctorPhone==e.phone}))},getWaitStatus:function(e){var t=this.unFinishOrders.find((function(t){return t.orderPhoneNum==window.lineId&&t.doctorPhone==e.phone})).status;return"process"==t?"醫師處理中":"等待醫師回覆中"},addCollection:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a={userId:window.lineId,doctorPhone:e.phone},i=null===(r=t.favList)||void 0===r?void 0:r.find((function(t){return t.doctorPhone==e.phone})),!i){n.next=5;break}return s["a"].$toast.success("您已收藏成功"),n.abrupt("return");case 5:return n.prev=5,n.next=8,o["a"].addMyFav(a);case 8:s["a"].$toast.success("您已收藏成功"),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](5),s["a"].$toast.error("收藏 Fail");case 14:case"end":return n.stop()}}),n,null,[[5,11]])})))()},book:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:o["c"].bookItem=e,t.$router.push("/payment");case 2:case"end":return n.stop()}}),n)})))()},getBooksNum:function(){return 3},viewDetail:function(e){window.scrollTo({top:0,behavior:"smooth"});var t=this.isOrderAble(e);e.status=t?"waiting":"finish",o["c"].selectedDoctor=e,this.$router.push("doctordetails")},getDesc:function(e){return"擅長: "+e.description},getTitle:function(e){return e.name+" | "+e.hospital+" | "+e.title},getImgPath:function(e,t){return o["c"].imgPrefix+e.cover.url},getDocList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=e.id?"doctors?cid_eq="+e.id:"doctors?_limit=30&_start=".concat(e.skip),t.next=4,axios.get(n);case 4:e.docs=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getOrderHistory:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.lineId){t.next=3;break}return e.myPreviousOrders=[],t.abrupt("return");case 3:return n="orderPhoneNum_eq="+window.lineId,t.next=6,o["a"].getOrders(n);case 6:r=t.sent,r.count,a=r.items,e.myPreviousOrders=a;case 10:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.query,r=n.id,a=n.searchBy,e.id=+r,e.name=a,e.searchBy=a||"熱門醫生",t.prev=4,e.loadingApi=!0,t.next=8,e.getOrderHistory();case 8:return t.next=10,e.getDocList();case 10:return t.next=12,o["a"].getCancerTypes();case 12:e.cates=t.sent,t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](4),alert("error "+t.t0);case 18:return t.prev=18,e.loadingApi=!1,t.finish(18);case 21:e.getMyFav();case 22:case"end":return t.stop()}}),t,null,[[4,15,18,21]])})))()},watch:{}},u=c,d=(n("c0ea"),n("2877")),l=n("5af8"),p=Object(d["a"])(u,r,a,!1,null,"15a3dde4",null);"function"===typeof l["default"]&&Object(l["default"])(p);t["default"]=p.exports},c0ea:function(e,t,n){"use strict";n("fdf0")},fdf0:function(e,t,n){}}]);
//# sourceMappingURL=chunk-2e04eb74.77dfc377.js.map