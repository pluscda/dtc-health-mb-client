(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7566b612"],{"83cc":function(e,t,n){},8456:function(e,t,n){"use strict";n("bf49")},"9b24":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-tw":{"title":"名醫會館"},"zh-cn":{"title":"名医会馆"}}'),delete e.options._Ctor}},a55b:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"dtc-login",style:e.isLogin?"":"justify-content: center;"},[e.isLogin?n("nav",{directives:[{name:"show",rawName:"v-show",value:!e.isDoc,expression:"!isDoc"}],staticClass:"login"},[n("h2",[e._v(" 我的健康中心 "),n("span",{staticClass:"mt-2",staticStyle:{"font-size":"13px","text-align":"left"},on:{click:e.logout}},[e._v("用戶: "+e._s(e.myPhone)+"..."),n("i",{staticClass:"fas fa-sign-out-alt ml-2"},[e._v("登出")])])]),n("van-cell-group",e._l(e.titles,(function(t,o){return n("van-cell",{key:t,attrs:{style2:"background:#e3e4f9 !important;color:black;",label:e.labels[o],title:t,size:"large"},on:{click:function(n){return e.open(t,o)}}})})),1)],1):n("nav",[n("PhoneLogin")],1)])},s=[],r=(n("caad"),n("fb6a"),n("2532"),n("3aec")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"dtc-phone"},[n("van-overlay",{staticStyle:{"z-index":"9999"},attrs:{show:e.showMask},on:{click:function(t){e.showMask=!1}}},[n("van-loading",{staticClass:"mt-4",attrs:{type:"spinner"}})],1),n("main",[n("h2",[e._m(0),e._v(e._s(e.$t("健康通行證"))+" ")]),n("div",{staticClass:"phone-div"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{placeholder:"請輸入手機號碼",minlength:"10",maxlength:"10"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),n("div",{staticClass:"phone-div mt-3 short-code"},[n("div",{directives:[{name:"show",rawName:"v-show",value:10==e.phone.length,expression:"phone.length == 10"}],staticClass:"code-btn",on:{click:e.register}},[e._v("獲取短信驗證碼")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"},{name:"show",rawName:"v-show",value:e.needCode,expression:"needCode"}],attrs:{placeholder:"請輸入短信驗證碼",minlength:"6",maxlength:"6"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.enableLogin,expression:"enableLogin"}],staticClass:"login",on:{click:e.confirmSMSCode}},[e._v("登入")])]),n("button",{attrs:{id:e.recaptchaDomId,note:"google requried this invisable div"}})],1)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"mr-3"},[n("i",{staticClass:"fas fa-sign-in-alt"})])}],c=(n("ac1f"),n("5319"),n("96cf"),n("1da1")),u=n("2b0e"),l={name:"login",data:function(){return{showKeyboard:!0,phone:"0928012588",needCode:"",code:"654321",confirmationSMSCodeResult:"",user:"",jwt:"",recaptchaDomId:"sign-in-button",showMask:!1}},computed:{isLogin:function(){return sessionStorage.isLogin||r["c"].isLogin},enableLogin:function(){return this.code&&6==this.code.length&&!isNaN(this.code)&&this.needCode}},methods:{register:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.showMask=!0,t.next=4,r["a"].registerByMobilePhone("+886".concat(e.phone),e.recaptchaDomId);case 4:e.confirmationSMSCodeResult=t.sent,e.needCode=!0,e.showMask=!1,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),u["default"].$toast.error("請檢查電話號碼是否正確"),e.showMask=!1;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},confirmSMSCode:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.showMask=!0,t.next=4,e.confirmationSMSCodeResult.confirm(e.code);case 4:t.next=11;break;case 6:t.prev=6,t.t0=t["catch"](0),location.reload(),u["default"].$toast.error("請檢查驗證號碼"+t.t0),e.showMask=!1;case 11:return t.prev=11,t.next=14,e.loginStrapi();case 14:n=t.sent,o=n.jwt,o||e.registerStrapi();case 17:return t.prev=17,sessionStorage.token=e.jwt,localStorage.token=e.jwt,e.user=JSON.stringify(e.user,null,2),e.showMask=!1,r["b"].login(e.phone),t.finish(17);case 24:case"end":return t.stop()}}),t,null,[[0,6],[11,,17,24]])})))()},registerStrapi:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].registerStrapi({username:e.phone,password:r["c"].PASSWORD});case 2:n=t.sent,o=n.user,s=n.jwt,s&&(e.user=o,r["c"].isDoctor=o.isDoctor?"true":"",e.jwt=s,o.isDoctor&&e.$router.push("dtc/paidList?isdoc=true"));case 6:case"end":return t.stop()}}),t)})))()},loginStrapi:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r["a"].loginStrapi({identifier:e.phone,password:r["c"].PASSWORD});case 3:return n=t.sent,o=n.user,s=n.jwt,s&&(e.user=o,r["c"].isDoctor=o.isDoctor?"true":"",e.jwt=s,o.isDoctor&&e.$router.replace("paidlist?isdoc=true")),t.abrupt("return",{jwt:s});case 10:return t.prev=10,t.t0=t["catch"](0),t.abrupt("return",{jwt:""});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}},mounted:function(){}},p=l,d=(n("8456"),n("2877")),h=n("ef12"),f=Object(d["a"])(p,i,a,!1,null,"0a16c757",null);"function"===typeof h["default"]&&Object(h["default"])(f);var m=f.exports,v=["預約紀錄(6)","提問(5)","意見反饋(1)","我的收藏(2)","系統設置"],g=["共有6筆記錄","你有一則已答覆","廠商有兩則反饋","你有兩個收藏","客製化個人設定"],w={name:"loginHome",data:function(){return{titles:v,labels:g,phone:sessionStorage.phone,idDoc:location.href.includes("isdoc=true")}},computed:{isLogin:function(){return sessionStorage.isLogin||r["c"].isLogin},myPhone:function(){var e=sessionStorage.phone?sessionStorage.phone.slice(0,6):"";return e}},components:{PhoneLogin:m},methods:{open:function(e,t){0==t&&this.$router.push("myorderlist")},logout:function(){r["b"].logout(),r["c"].activeTab=0,this.$router.push("home"),location.reload(!0)}},mounted:function(){r["c"].activeTab=3},watch:{}},b=w,S=(n("d5c9"),n("edc3")),_=Object(d["a"])(b,o,s,!1,null,"294cc00a",null);"function"===typeof S["default"]&&Object(S["default"])(_);t["default"]=_.exports},b6d8:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-tw":{"登入":"登入","健康通行證":"登入健康通行證","手機號碼":"手機號碼","24小時不限次數與醫生面對面諮詢立即開通":"24小時不限次數與醫生面對面諮詢立即開通"},"zh-cn":{"登入":"登入","健康通行證":"登入健康通行證","手機號碼":"手機號碼","24小時不限次數與醫生面對面諮詢立即開通":"24小時不限次數與醫生面對面諮詢立即開通"}}'),delete e.options._Ctor}},bf49:function(e,t,n){},d5c9:function(e,t,n){"use strict";n("83cc")},edc3:function(e,t,n){"use strict";var o=n("9b24"),s=n.n(o);t["default"]=s.a},ef12:function(e,t,n){"use strict";var o=n("b6d8"),s=n.n(o);t["default"]=s.a}}]);
//# sourceMappingURL=chunk-7566b612.a021a224.js.map