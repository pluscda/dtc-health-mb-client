(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c84da4e"],{"0ccb":function(e,t,n){var r=n("50c4"),a=n("1148"),i=n("1d80"),c=Math.ceil,o=function(e){return function(t,n,o){var s,u,l=String(i(t)),d=l.length,p=void 0===o?" ":String(o),m=r(n);return m<=d||""==p?l:(s=m-d,u=a.call(p,c(s/p.length)),u.length>s&&(u=u.slice(0,s)),e?l+u:u+l)}};e.exports={start:o(!1),end:o(!0)}},1175:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"doc-list pt-2"},[n("van-overlay",{staticStyle:{"z-index":"9999","text-align":"center"},attrs:{show:e.loadingApi}},[n("van-loading",{attrs:{type:"spinner"}})],1),n("header",[e._v("預約線上名醫")]),e._l(e.docs,(function(t,r){return n("main",{key:r,staticClass:"doc-item mt-1"},[n("van-card",{attrs:{price:t.price,currency:"NT",desc:e.getDesc(t),title:e.getTitle(t),thumb:e.getImgPath(t,r)},on:{click:function(n){return e.viewDetail(t)}}})],1)})),n("h5",{staticStyle:{color:"black","margin-top":"10px",transform:"translateX(10px)"}},[e._v("請填寫基本資料")]),n("van-form",{on:{submit:e.submitCard}},[n("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"請填寫用户名"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("van-field",{attrs:{type:"email",name:"密码",label:"電子信箱",placeholder:"電子信箱",rules:[{required:!0,message:"請填寫電子信箱"}]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("h5",{staticStyle:{color:"black","margin-top":"10px",transform:"translateX(10px)"}},[e._v("信用卡")]),n("div",{attrs:{id:"tappay-container"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{disabled:!e.enableSubmitBtn,round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1)],1)],2)},a=[],i=(n("a4d3"),n("e01a"),n("99af"),n("4de4"),n("accc"),n("0d03"),n("b0c0"),n("4795"),n("2909")),c=(n("96cf"),n("1da1")),o=n("2b0e"),s=n("3aec"),u={name:"docList",data:function(){return{id:"",name:"",docs:[],cates:[],skip:0,cat:"",searchBy:"",myPreviousOrders:[],loadingApi:!1,jsonOutput:"",favList:[],username:"",email:"",canGetPrime:!1}},computed:{unFinishOrders:function(){return this.myPreviousOrders.filter((function(e){return"finish"!=e.status}))},enableSubmitBtn:function(){return this.canGetPrime&&this.email&&this.username}},methods:{submitCard:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loadingApi=!0,n=e.docs[0],r={},TPDirect.card.getPrime(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r.partner_key=s["c"].tappayId,r.prime="".concat(a.card.prime),r.amount=+n.price,r.merchant_id="pluscda_CTBC",r.details=n.name,i={phone_number:"+886928012588",name:e.username?e.username:"DTC Tester",email:e.email?e.email:"DTC@dd.com",zip_code:"100",address:"台北市天龍區芝麻街1號1樓",national_id:"A123456789"},r.cardholder=i,t.prev=7,t.next=10,s["a"].confirmPayOnline(r);case 10:e.book(n),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](7),e.loadingApi=!1,alert(""+t.t0);case 17:case"end":return t.stop()}}),t,null,[[7,13]])})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})))()},book:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,c,u,l,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return window.orderedDocPhone=e.phone,r={lineClientDisplayName:s["c"].lineProfile.displayName?s["c"].lineProfile.displayName:"DTC Tester",realName:e.name,orderPhoneNum:window.lineId,paidAmount:e.price,orderStatus:"waiting",orderDate:(new Date).toISOString(),doctorPhone:e.phone,inqueryCate:1,cusUnreadMsg:1,totalMsg:1,message:e.cid<s["c"].MIN_NON_CANCER_NUM?[{docComment:"需要您的報告,請您用郵件寄出",commentAt:(new Date).toISOString()}]:[]},n.prev=2,t.loadingApi=!0,n.next=6,s["a"].addOrder(r);case 6:return n.sent,o["a"].$toast.success("您已預約成功"),n.next=10,t.getOrderHistory();case 10:return t.docs=Object(i["a"])(t.docs),c=(null===(a=e.orderPhoneNum)||void 0===a?void 0:a.length)>10?e.orderPhoneNum:"U60dea79b6fcd77b9c9e3eeb21fcce0a1",u={id:c},l="你有一筆新訂單NT".concat(r.paidAmount,"元,客戶名稱: ").concat(r.lineClientDisplayName),u.msg=l,n.next=17,s["a"].lineMsg(u);case 17:if(!(e.cid<s["c"].MIN_NON_CANCER_NUM)){n.next=22;break}return d={id:window.lineId},d.msg="需要您的報告,請您用郵件寄出\n新北市中和區中正路866號15F 合華科技股份有限公司",n.next=22,s["a"].lineSelf(d);case 22:t.$router.push("/myorderlist"),n.next=28;break;case 25:n.prev=25,n.t0=n["catch"](2),o["a"].$toast.error("order fail"+n.t0);case 28:return n.prev=28,window.orderedDocPhone="",t.loadingApi=!1,n.finish(28);case 32:case"end":return n.stop()}}),n,null,[[2,25,28,32]])})))()},getBooksNum:function(){return 3},viewDetail:function(e){window.scrollTo({top:0,behavior:"smooth"});var t=this.isOrderAble(e);e.status=t?"waiting":"finish",s["c"].selectedDoctor=e,this.$router.push("doctordetails")},getDesc:function(e){return"擅長: "+e.description},getTitle:function(e){return e.name+" | "+e.hospital+" | "+e.title},getImgPath:function(e,t){return s["c"].imgPrefix+e.cover.url},getDocList:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.docs=[s["c"].bookItem]}catch(n){}case 1:case"end":return t.stop()}}),t)})))()},getOrderHistory:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},constructTapPay:function(){var e=this;s["a"].initTapPay("#tappay-container"),TPDirect.card.onUpdate(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.canGetPrime=n.canGetPrime;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loadingApi=!0,t.next=4,e.getDocList();case 4:return t.next=6,s["a"].getCancerTypes();case 6:e.cates=t.sent,setTimeout((function(){return e.constructTapPay()}),800),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),alert("error "+t.t0);case 13:return t.prev=13,e.loadingApi=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])})))()},watch:{}},l=u,d=(n("f5c1"),n("2877")),p=n("d178"),m=Object(d["a"])(l,r,a,!1,null,"5c41afb9",null);"function"===typeof p["default"]&&Object(p["default"])(m);t["default"]=m.exports},3654:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-tw":{"title":"名醫會館"},"zh-cn":{"title":"名医会馆"}}'),delete e.options._Ctor}},4795:function(e,t,n){var r=n("23e7"),a=n("da84"),i=n("342f"),c=[].slice,o=/MSIE .\./.test(i),s=function(e){return function(t,n){var r=arguments.length>2,a=r?c.call(arguments,2):void 0;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,a)}:t,n)}};r({global:!0,bind:!0,forced:o},{setTimeout:s(a.setTimeout),setInterval:s(a.setInterval)})},"64e5":function(e,t,n){"use strict";var r=n("d039"),a=n("0ccb").start,i=Math.abs,c=Date.prototype,o=c.getTime,s=c.toISOString;e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=s.call(new Date(-50000000000001))}))||!r((function(){s.call(new Date(NaN))}))?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+a(i(t),r?6:4,0)+"-"+a(e.getUTCMonth()+1,2,0)+"-"+a(e.getUTCDate(),2,0)+"T"+a(e.getUTCHours(),2,0)+":"+a(e.getUTCMinutes(),2,0)+":"+a(e.getUTCSeconds(),2,0)+"."+a(n,3,0)+"Z"}:s},accc:function(e,t,n){var r=n("23e7"),a=n("64e5");r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==a},{toISOString:a})},d178:function(e,t,n){"use strict";var r=n("3654"),a=n.n(r);t["default"]=a.a},e1d6:function(e,t,n){},f5c1:function(e,t,n){"use strict";n("e1d6")}}]);
//# sourceMappingURL=chunk-6c84da4e.6c6b6dfb.js.map